import{a as c}from"./axios.77c802c4.js";const i="http://3.38.59.40:8080/",n=localStorage.getItem("accessToken"),s=localStorage.getItem("refreshToken"),o=c.create({baseURL:`${i}`});o.interceptors.request.use(e=>{if(n){if(!e.headers)return e;e.headers.Authorization||(e.headers.Authorization="Bearer "+n.replace(/"/g,""))}return e},e=>Promise.reject(e));o.interceptors.response.use(e=>e,async e=>{const r=e.config;if(r.url!=="/auth/signin"&&e.response&&e.response.status===401&&!r._retry){r._retry=!0;try{const t=c.create();delete t.defaults.headers.common.Authorization;const a=(await t.get("http://3.38.59.40:8080/api/v1/auth/refresh",{params:{refreshToken:s==null?void 0:s.replace(/"/g,"")}})).data;return localStorage.setItem("accessToken",a),r.headers.Authorization="Bearer "+a,o(r)}catch(t){return Promise.reject(t)}}return Promise.reject(e)});export{o as c};
